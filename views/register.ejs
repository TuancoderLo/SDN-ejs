<!DOCTYPE html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@5"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <style>
      .luxury-gradient {
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
      }
      .premium-gradient {
        background: linear-gradient(
          135deg,
          #4f46e5 0%,
          #7c3aed 50%,
          #ec4899 100%
        );
      }
      .ocean-gradient {
        background: linear-gradient(
          135deg,
          #06b6d4 0%,
          #3b82f6 50%,
          #8b5cf6 100%
        );
      }
      .glass-morphism {
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
      }
      .modern-gradient {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }
      @keyframes pulse-glow {
        0%,
        100% {
          box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        50% {
          box-shadow: 0 0 40px rgba(59, 130, 0.6);
        }
      }
      @keyframes shimmer {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }
      @keyframes gradient-shift {
        0%,
        100% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
      }
      @keyframes bounce-in {
        0% {
          opacity: 0;
          transform: scale(0.3) translateY(-50px);
        }
        50% {
          opacity: 1;
          transform: scale(1.05) translateY(0);
        }
        70% {
          transform: scale(0.95);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }
      @keyframes slide-in-left {
        from {
          opacity: 0;
          transform: translateX(-100px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      @keyframes slide-in-right {
        from {
          opacity: 0;
          transform: translateX(100px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      @keyframes rotate-in {
        from {
          opacity: 0;
          transform: rotate(-180deg) scale(0.5);
        }
        to {
          opacity: 1;
          transform: rotate(0deg) scale(1);
        }
      }
      @keyframes scale-in {
        from {
          opacity: 0;
          transform: scale(0.8);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      .animate-fadeInUp {
        animation: fadeInUp 0.6s ease-out;
      }
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }
      .animate-pulse-glow {
        animation: pulse-glow 2s ease-in-out infinite;
      }
      .animate-shimmer {
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        background-size: 200% 100%;
        animation: shimmer 2s infinite;
      }
      .animate-gradient-shift {
        background-size: 400% 400%;
        animation: gradient-shift 8s ease infinite;
      }
      .animate-bounce-in {
        animation: bounce-in 0.8s ease-out;
      }
      .animate-slide-in-left {
        animation: slide-in-left 0.8s ease-out;
      }
      .animate-slide-in-right {
        animation: slide-in-right 0.8s ease-out;
      }
      .animate-rotate-in {
        animation: rotate-in 1s ease-out;
      }
      .animate-scale-in {
        animation: scale-in 0.6s ease-out;
      }
      .gradient-text {
        background: linear-gradient(
          135deg,
          #667eea 0%,
          #764ba2 50%,
          #f093fb 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      .input-focus {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid transparent;
        background: rgba(255, 255, 255, 0.9);
      }
      .input-focus:focus {
        transform: translateY(-2px);
        box-shadow: 0 20px 40px rgba(102, 126, 234, 0.15);
        border-color: #667eea;
        background: rgba(255, 255, 255, 1);
      }
      .btn-luxury {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      }
      .btn-luxury:hover {
        box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);
      }
      .modern-input {
        position: relative;
        margin-bottom: 0.8rem;
      }

      .modern-input label {
        display: block;
        margin-bottom: 0.3rem;
        font-weight: 600;
        color: #374151;
        font-size: 0.75rem;
      }

      .modern-input input,
      .modern-input select {
        width: 100%;
        height: 2.75rem;
        padding: 0.7rem;
        border: 2px solid #e5e7eb;
        border-radius: 0.75rem;
        background: rgba(255, 255, 255, 0.9);
        font-size: 0.85rem;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .modern-input input:focus,
      .modern-input select:focus {
        outline: none;
        border-color: #667eea;
        background: rgba(255, 255, 255, 1);
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .modern-input i {
        color: #667eea;
      }

      .register-card {
        backdrop-filter: blur(20px);
        background: rgba(255, 255, 255, 0.85);
        border: 1px solid rgba(255, 255, 255, 0.5);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.6);
      }

      /* Mobile responsive improvements */
      @media (max-width: 768px) {
        .grid-cols-1.md\\:grid-cols-3 {
          grid-template-columns: 1fr;
          gap: 0.6rem;
        }

        .register-card {
          margin: 0.5rem;
          padding: 0.8rem !important;
        }

        .text-2xl {
          font-size: 1.5rem !important;
        }

        .modern-input {
          margin-bottom: 0.6rem;
        }

        .modern-input input,
        .modern-input select {
          height: 2.5rem;
          font-size: 0.8rem;
          padding: 0.6rem;
        }

        .btn-luxury {
          height: 2.8rem !important;
          font-size: 0.9rem !important;
        }

        .w-14.h-14 {
          width: 2.5rem !important;
          height: 2.5rem !important;
        }

        .text-xl {
          font-size: 1rem !important;
        }

        .py-4 {
          padding-top: 0.5rem !important;
          padding-bottom: 0.5rem !important;
        }
      }

      @media (max-width: 480px) {
        .register-card {
          margin: 0.25rem;
          padding: 0.6rem !important;
        }

        .text-2xl {
          font-size: 1.25rem !important;
        }

        .text-sm {
          font-size: 0.8rem !important;
        }

        .modern-input input,
        .modern-input select {
          height: 2.25rem;
          font-size: 0.75rem;
          padding: 0.5rem;
        }

        .btn-luxury {
          height: 2.5rem !important;
          font-size: 0.85rem !important;
        }

        .modern-input {
          margin-bottom: 0.5rem;
        }

        .w-14.h-14 {
          width: 2rem !important;
          height: 2rem !important;
        }
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 min-h-screen relative overflow-hidden"
  >
    <!-- Luxury Background Elements -->
    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
      <div
        class="absolute top-20 left-20 w-96 h-96 bg-gradient-to-r from-purple-200/30 to-pink-200/30 rounded-full blur-3xl animate-float"
      ></div>
      <div
        class="absolute top-40 right-20 w-80 h-80 bg-gradient-to-r from-blue-200/30 to-cyan-200/30 rounded-full blur-3xl animate-float"
        style="animation-delay: 2s"
      ></div>
      <div
        class="absolute bottom-20 left-1/4 w-72 h-72 bg-gradient-to-r from-indigo-200/30 to-purple-200/30 rounded-full blur-3xl animate-float"
        style="animation-delay: 4s"
      ></div>
      <div
        class="absolute bottom-40 right-1/3 w-64 h-64 bg-gradient-to-r from-pink-200/30 to-rose-200/30 rounded-full blur-3xl animate-float"
        style="animation-delay: 1s"
      ></div>
      <div
        class="absolute top-1/2 left-10 w-56 h-56 bg-gradient-to-r from-cyan-200/30 to-blue-200/30 rounded-full blur-3xl animate-float"
        style="animation-delay: 3s"
      ></div>
      <div
        class="absolute top-1/3 right-1/4 w-48 h-48 bg-gradient-to-r from-violet-200/30 to-purple-200/30 rounded-full blur-3xl animate-float"
        style="animation-delay: 5s"
      ></div>
    </div>

    <%- include('partials/navbar') %>

    <!-- Main Content -->
    <main class="min-h-screen flex items-center justify-center py-4 relative">
      <div class="container mx-auto px-4">
        <div class="max-w-5xl mx-auto" style="margin-top: -4vh">
          <!-- Register Card -->
          <div class="register-card rounded-3xl relative">
            <div class="p-5 relative z-10">
              <!-- Header -->
              <div class="text-center mb-4">
                <div
                  class="inline-flex items-center justify-center w-14 h-14 modern-gradient rounded-2xl mb-3 shadow-2xl relative"
                >
                  <i class="fas fa-user-plus text-xl text-white"></i>
                </div>
                <h1 class="text-2xl font-bold gradient-text mb-1">
                  Join Our Community
                </h1>
                <p class="text-gray-600 text-sm">
                  Create your account and start exploring luxury fragrances
                </p>
              </div>

              <!-- Error/Success Messages -->
              <% if (error) { %>
              <div class="alert alert-error mb-4">
                <i class="fas fa-exclamation-circle"></i>
                <span><%= error %></span>
              </div>
              <% } %> <% if (success) { %>
              <div class="alert alert-success mb-4">
                <i class="fas fa-check-circle"></i>
                <span><%= success %></span>
              </div>
              <% } %>

              <!-- Register Form -->
              <form id="registerForm" class="space-y-3">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                  <div class="modern-input">
                    <label for="registerEmail">
                      <i class="fas fa-envelope mr-2"></i>
                      Email Address
                    </label>
                    <input
                      type="email"
                      id="registerEmail"
                      placeholder="Enter your email address"
                      required
                    />
                  </div>

                  <div class="modern-input">
                    <label for="registerName">
                      <i class="fas fa-user mr-2"></i>
                      Full Name
                    </label>
                    <input
                      type="text"
                      id="registerName"
                      placeholder="Enter your full name"
                      required
                    />
                  </div>

                  <div class="modern-input">
                    <label for="regYOB">
                      <i class="fas fa-calendar mr-2"></i>
                      Year of Birth
                    </label>
                    <input
                      type="number"
                      id="regYOB"
                      min="1900"
                      max="2024"
                      placeholder="YYYY"
                      required
                    />
                  </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                  <div class="modern-input">
                    <label for="registerPassword">
                      <i class="fas fa-lock mr-2"></i>
                      Password
                    </label>
                    <input
                      type="password"
                      id="registerPassword"
                      placeholder="Create a strong password"
                      required
                    />
                  </div>

                  <div class="modern-input">
                    <label for="confirmPassword">
                      <i class="fas fa-lock mr-2"></i>
                      Confirm Password
                    </label>
                    <input
                      type="password"
                      id="confirmPassword"
                      placeholder="Confirm your password"
                      required
                    />
                  </div>

                  <div class="modern-input">
                    <label for="regGender">
                      <i class="fas fa-venus-mars mr-2"></i>
                      Gender
                    </label>
                    <select id="regGender" required>
                      <option value="">Select Gender</option>
                      <option value="true">Male</option>
                      <option value="false">Female</option>
                    </select>
                  </div>
                </div>

                <div class="pt-2">
                  <button
                    type="submit"
                    class="btn w-full h-12 text-base font-semibold text-white btn-luxury rounded-xl"
                  >
                    <i class="fas fa-user-plus mr-2"></i>
                    Create My Account
                  </button>
                </div>
              </form>

              <!-- Footer -->
              <div class="text-center mt-4 pt-3 border-t border-gray-200">
                <p class="text-gray-600 text-base">
                  Already have an account?
                  <a
                    href="/login"
                    class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 font-bold hover:from-purple-700 hover:to-blue-700 transition-all duration-300"
                    onclick="storeRedirectUrl(window.location.href)"
                  >
                    Sign In Here
                  </a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast toast-top toast-end z-50">
      <div
        id="toast"
        class="alert hidden shadow-2xl glass-morphism animate-fadeInUp relative"
      >
        <div class="flex items-center gap-3">
          <div id="toast-icon" class="text-xl"></div>
          <span id="toast-message" class="font-semibold"></span>
        </div>
        <button
          id="toast-close"
          class="btn btn-sm btn-circle btn-ghost hover:bg-white/20 transition-all duration-300"
        >
          ✕
        </button>
        <!-- Progress bar -->
        <div
          id="toast-progress"
          class="absolute bottom-0 left-0 h-1 bg-current opacity-30 transition-all duration-100 ease-linear"
          style="width: 100%"
        ></div>
      </div>
    </div>

    <script src="/javascripts/app.js"></script>

    <script>
      // Store current page URL for redirect after login if not already stored
      document.addEventListener("DOMContentLoaded", function () {
        const currentUrl = window.location.href;
        const referrer = document.referrer;

        // If user came from another page and no redirect URL is stored, store the referrer
        if (
          referrer &&
          referrer !== currentUrl &&
          !localStorage.getItem("redirectAfterLogin")
        ) {
          // Only store if referrer is from the same domain
          if (referrer.includes(window.location.origin)) {
            localStorage.setItem("redirectAfterLogin", referrer);
            console.log("Stored redirect URL:", referrer);
          }
        }

        // Form validation enhancements
        const form = document.getElementById("registerForm");
        if (form) {
          form.addEventListener("submit", function (e) {
            const password = document.getElementById("registerPassword").value;
            const confirmPassword =
              document.getElementById("confirmPassword").value;

            if (password !== confirmPassword) {
              e.preventDefault();
              alert("Passwords do not match!");
              return false;
            }
          });
        }
      });
    </script>
  </body>
</html>
